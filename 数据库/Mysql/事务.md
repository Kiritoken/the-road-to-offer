# 事务

# ACID
+ 原子性
    + 示组成一个事务的多个数据库操作是一个不可分割的原子单元，只有所有的操作执行成功，整个事务才提交。事务中的任何一个数据库操作失败，已经执行的任何操作都必须被撤销，让数据库返回初始状态。
    + 对应数据库的***undo log***实现
    + 保存的是和执行操作相反的操作
    + MVCC 不同版本进行回溯的过程


+ ***一致性***

    数据“一致性”是最终目标，其他特性都是为达到这个目标而采取的措施、要求或手段。

+ 隔离型
    + 对应数据库中的锁实现
    + innoDB四种隔离级别 级别由低到高，隔离级别越低，效率越高，越不安全
        + 读未提交
        + 读已提交
            + 会出现不可重复读问题和幻读问题
        + 可重复读（默认级别）

        + 串行化
    + 一致性非锁定读
        + select * from table where id = 1;
    + 一致性锁定读
        + select * from table where id = 1 for update;

+ 持久性
    + 对应数据库的redo log实现
    + 保证crash safe

---
+ 低水位
+ 高水位