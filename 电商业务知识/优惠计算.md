# 优惠计算

http://www.woshipm.com/operate/4191246.html


平行式门槛优惠计算

优惠券分摊

优惠分摊原则，不但应该按比例分摊，还应在满足优惠条件的商品上，按照商品金额的比列分摊，而不是盲分摊。


当一个订单商品过多时，计算每个单个商品优惠价格，四舍五入后，他们之和可能小于或者大于总优惠金额；为了避免这种情况，我们将最后一个商品优惠价格 = 总优惠金额 – 商品A的分摊优惠金额 – … – 商品Z的分摊优惠金额。


https://mp.weixin.qq.com/s/A755U4sPtywERo1JJGa5gw