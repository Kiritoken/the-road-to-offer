## 阿里-芝麻信用

视频面试：1小时

+ 上来一道题情景题
```
//无数据库存储了「机票」实体(entity)，包含字段：出发地、结束地、 登机时间 、机票价格；现诉求如下：
//1、用户输入「出发地」「结束地」「登机时间」，系统返回给出最低价的「机票」
```
忘记用ConcurrentHashMap了


+ 为什么从上一家公司离职
    + 不喜欢
+ 希望自己之后专注于什么
    + 后端开发

+ JVM垃圾回收器？回收算法了解吗？
    + 从什么是垃圾，可达性分析，标记清除，复制，标记清除整理说

+ 什么时候发生Full GC
    + 动态类太多了，元空间满了
    + 主动调用System.gc()或者Runtime.getRuntime().gc()
    + 当时只想到了这两个

+ Spring的IOC知道吗，说一下
    + 控制反转，说明spring的bean容器和自动装配

+ redis用过哪些命令？
    + 所有结构的set，get，lpop，hset,hget,hmget,hmset

+ redis原子操作？哪些地方用到了？
    + lua脚本
    + 分布式锁setnx 解锁的时候判断设置的随机数是否相同

+ 实现分布式锁的方式？
    + redis
    + zookeeper 临时有序节点

+ redis的分布式锁和zookeeper分布式锁的区别？
    + redis集群模式分布式锁的问题？
    + redis key 并发竞争？
    + zookeeper 公平？

+ linux 常用命令
+ top 一些其他的参数
+ cpu负载知道怎么看吗


+ 消息队列知道哪些？ 
    + 华为MQ、IBMMq、rocketmq、rabbitmq


+ kafka知道吗？
    + 知道，常用于大数据计算中，分布式水平扩展良好
    + 简单说了一下broker、topic、partition
    + 通过zookeeper记录offset

+ 分库分表知道吗
    + 知道，使用过sharding-sphere进行了分表

+ 场景题，现在需要对支付流水进行记录，用户查找自己的支付记录，商家查找自己的流水记录，怎么设计
    + 我回答的是建立两个冗余的流水表，按照用户ID分库分表，另一个按照商户ID分库分表

+ 那怎么保证两个数据库里的内容是一致的呢
    + 订阅用户表的binlog，写个服务同步到商户库里？
    + 中间使用最终一致性解决方案，重试失败人工排查补偿？


+ 知不知道分布式事务？可不可以用分布式事务解决？
    + 知道，2pc，xa，3pc，tcc，本地消息表，最终一致性
    + 看具体的业务场景，是否允许用户查到了，商家延时查到，允许的话使用最终一致性
    + 不允许的话考虑tcc，但是吞吐量可能会降低


+ 你有什么想问我的？
    + k8s自带服务注册于发现和负载均衡，那springcloud能不能被替换掉
        + ：两个是不一样的解决方案，就像google有tensorflow，其他的有pytorch，是不同的方法

+ 喜欢什么
    + 打篮球、跑步、csgo

+ 最近有没有关注什么热点新闻
    + 格里芬时隔一年再扣篮，给我看哭了
    + 中美外交会议


